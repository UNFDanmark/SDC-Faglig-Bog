\documentclass{article}
\usepackage{listings}

\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc} 

\lstnewenvironment{XJavaCode}[2]
	{\lstset{language=Java, caption=#1, label=#2}}
	{}

\newenvironment{JavaCode}[2]
	{\begin{XJavaCode}{#1}{#2}}
	{\end{XJavaCode}}

\begin{document}
	\begin{JavaCode}{caption}{label}
		ASD
	\end{JavaCode}
	æøå
\end{document}